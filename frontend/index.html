<!DOCTYPE html>
<html lang="pt">
<head>
	

  <meta charset="UTF-8">
  <meta name="google-site-verification" content="zkv7XRS6_wyqyWt8pyXcE0vwnrVqdQ7l0vXWyKhATk0" />
	<title>Ouviescrevi ‚Äì Transcri√ß√£o autom√°tica com IA</title>
	<meta name="description" content="Transcreve √°udios e v√≠deos em segundos com IA. Gr√°tis, r√°pido e pr√°tico. Lan√ßa j√° o teu Ouviescrevi!">
	<meta name="robots" content="index, follow">
<link rel="icon" href="/logos/icon3.png" type="image/png">
 
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #333;
      padding: 15px 30px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5em;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin-left: 20px;
    }
    nav a:hover {
      text-decoration: underline;
    }
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }
    form {
      background: white;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    input[type="file"], button {
      margin: 10px 0;
      padding: 10px;
      font-size: 1em;
    }
    #loading {
      display: none;
      margin-top: 20px;
      font-weight: bold;
      color: #555;
    }
    #output {
      margin-top: 30px;
      max-width: 800px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 5px 10px rgba(0,0,0,0.05);
    }
    textarea {
      width: 100%;
      height: 200px;
      margin-top: 10px;
      padding: 10px;
      font-size: 1em;
    }
    .btn-group button {
      margin: 5px;
    }
    .back-button {
      margin-top: 20px;
      background-color: #eee;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 1em;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <header>
    <img src="/logos/ouviescrevimainlogo.png" alt="Ouviescrevi" style="height: 40px;">

    <nav>
      <a href="index.html">In√≠cio</a>
      <a href="ajuda.html">Ajuda</a>
    </nav>
  </header>

<main>
  <section style="margin-top:60px; text-align:center; max-width:700px;">
    <h2>üì¢ Funcionalidades em breve</h2>
    <p style="font-size:1.1em;">
      Estamos a trabalhar para trazer ainda mais ferramentas para facilitar a tua transcri√ß√£o.<br>
      Em breve poder√°s contar com:
    </p>
    <ul style="text-align:left; margin-top:10px; font-size:1em;">
      <li>üîç Pesquisa inteligente dentro da transcri√ß√£o</li>
      <li>üó£Ô∏è Tradu√ß√£o autom√°tica para outros idiomas</li>
      <li>üìÖ Hist√≥rico das tuas transcri√ß√µes</li>
      <li>üìÇ Envio de ficheiros maiores</li>
    </ul>
    <p style="margin-top:15px; font-style:italic; color:#555;">
      Fica atento ‚Äî estamos s√≥ a come√ßar!
    </p>
  </section>
</main>


  <script>
  const form = document.getElementById("uploadForm");
  const loading = document.getElementById("loading");
  const progressBar = document.getElementById("progressBar");
  const output = document.getElementById("output");
  const transcriptionText = document.getElementById("transcriptionText");

  let progressInterval;

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const file = document.getElementById("fileInput").files[0];
    if (!file) return;

    const formData = new FormData();
    formData.append("file", file);

    output.style.display = "none";
    transcriptionText.value = "";
    loading.style.display = "block";
    progressBar.style.width = "0%";

    // Anima√ß√£o de progresso simulado
    let progress = 0;
    progressInterval = setInterval(() => {
      if (progress < 90) {
        progress += Math.random() * 5;
        progressBar.style.width = progress + "%";
      }
    }, 200);

    try {
      const res = await fetch("https://api.ouviescrevi.pt/transcribe", {

        method: "POST",
        body: formData
      });

      const data = await res.json();

      clearInterval(progressInterval);
      progressBar.style.width = "100%";

      transcriptionText.value = data.formatted || data.transcription || "‚ö†Ô∏è Erro ao transcrever.";
      output.style.display = "block";

      setTimeout(() => {
        loading.style.display = "none";
        progressBar.style.width = "0%";
      }, 500);

    } catch (err) {
      clearInterval(progressInterval);
      progressBar.style.width = "100%";
      transcriptionText.value = "‚ö†Ô∏è Erro ao transcrever.";
      output.style.display = "block";
      loading.style.display = "none";
    }
  });

   async function exportText(type) {
    const text = document.getElementById("transcriptionText").value;

    if (type === 'pdf') {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const textLines = doc.splitTextToSize(text, 180); // largura do texto

  let y = 20;
  for (let i = 0; i < textLines.length; i++) {
    if (y > 270) { // limite inferior da p√°gina
      doc.addPage();
      y = 20;
    }
    doc.text(textLines[i], 15, y);
    y += 8;
  }

  doc.save("transcricao.pdf");
}


    else if (type === 'docx') {
      const blob = new Blob([text], {
        type: 'application/msword;charset=utf-8'
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = "transcricao.doc";
      a.click();
      URL.revokeObjectURL(url);
    }
	else if (type === 'txt') {
  const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = "transcricao.txt";
  a.click();
  URL.revokeObjectURL(url);
}
else if (type === 'srt') {
  const lines = text.split('\n');
  let srt = '';
  let count = 1;

  for (let line of lines) {
    const match = line.match(/^\[(\d{2}):(\d{2})\] (.+)$/);
    if (match) {
      const min = match[1];
      const sec = match[2];
      const content = match[3];
      const start = `00:${min}:${sec},000`;
      const endSec = String(parseInt(sec) + 2).padStart(2, '0');
      const end = `00:${min}:${endSec},000`;
      srt += `${count}\n${start} --> ${end}\n${content}\n\n`;
      count++;
    }
  }

  const blob = new Blob([srt], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = "transcricao.srt";
  a.click();
  URL.revokeObjectURL(url);
}
else if (type === 'json') {
  const json = JSON.stringify({ transcription: text }, null, 2);
  const blob = new Blob([json], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = "transcricao.json";
  a.click();
  URL.revokeObjectURL(url);
}


  }
  let mediaRecorder;
let audioChunks = [];

async function startRecording() {
  const status = document.getElementById("recordingStatus");

  // Se j√° estiver a gravar, p√°ra e envia
  if (mediaRecorder && mediaRecorder.state === "recording") {
    mediaRecorder.stop();
    status.textContent = "üïê A processar o √°udio...";
    return;
  }

  // Come√ßar nova grava√ß√£o
  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
  mediaRecorder = new MediaRecorder(stream);
  audioChunks = [];

  mediaRecorder.ondataavailable = e => audioChunks.push(e.data);

  mediaRecorder.onstop = async () => {
    const blob = new Blob(audioChunks, { type: 'audio/webm' });
    const formData = new FormData();
    formData.append("file", blob, "gravacao.webm");

    // Mostrar loading
    output.style.display = "none";
    transcriptionText.value = "";
    loading.style.display = "block";
    progressBar.style.width = "0%";
    status.textContent = "üîÑ A enviar para transcri√ß√£o...";

    let progress = 0;
    progressInterval = setInterval(() => {
      if (progress < 90) {
        progress += Math.random() * 5;
        progressBar.style.width = progress + "%";
      }
    }, 200);

    try {
      const res = await fetch("https://api.ouviescrevi.pt/transcribe", {
        method: "POST",
        body: formData
      });
      const data = await res.json();

      clearInterval(progressInterval);
      progressBar.style.width = "100%";

      transcriptionText.value = data.formatted || data.transcription || "‚ö†Ô∏è Erro ao transcrever.";
      output.style.display = "block";
      status.textContent = "";
    } catch (err) {
      transcriptionText.value = "‚ö†Ô∏è Erro ao transcrever.";
      output.style.display = "block";
      status.textContent = "‚ùå Erro ao gravar.";
    }

    setTimeout(() => {
      loading.style.display = "none";
      progressBar.style.width = "0%";
    }, 500);
  };

  mediaRecorder.start();
  status.textContent = "üéôÔ∏è A gravar... clique novamente para terminar.";
}

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>